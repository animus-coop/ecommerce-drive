(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{7153:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return t(9646)}])},5634:function(e,n,t){"use strict";var r=t(5893),o=t(6979);t(7294);n.Z=function(e){var n=e.increaseQty,t=e.decreaseQty,c=e.qty,s=e.moreAvailable;return(0,r.jsxs)("div",{className:"product-quantity",children:[(0,r.jsx)("button",{className:"quantity-button",onClick:t,children:"-"}),(0,r.jsx)(o.Z,{className:"quantity",children:c}),(0,r.jsx)("button",{disabled:!s,className:"quantity-button ".concat(!s&&"unavailable"),onClick:n,children:"+"})]})}},3883:function(e,n,t){"use strict";var r=t(5893),o=(t(7294),t(9837)),c=t(7690),s=t(189),a=t(6979),i=t(1163),u=t(428),l=t(2814),d=t(9398);n.Z=function(e){var n=e.title,t=e.user,f=e.cart,h=(0,i.useRouter)();return(0,r.jsxs)("div",{className:"header",children:[t.logged&&(0,r.jsxs)("div",{className:"buttons-container",children:[(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(o.ZP,{width:100,onClick:function(){return h.push("/")},src:"/../../img/almargen-header.png",objectFit:"contain"})}),(0,r.jsxs)("div",{className:"sessions-buttons",children:[(0,r.jsxs)(c.ZP,{className:"logout-button",onClick:function(){return h.push("/api/logout")},children:["Salir",(0,r.jsx)(l.G,{className:"logout-icon",icon:d.SJh})]}),f&&(0,r.jsx)(s.ZP,{css:{cursor:"pointer"},color:"warning",content:f.products.length,shape:"circle",onClick:function(){return h.push("/cart")},children:(0,r.jsx)(u.w,{fill:"white",size:30,width:24,height:24,onClick:function(){return h.push("/cart")}})})]})]}),(0,r.jsx)(a.Z,{className:"header-text",css:{fontWeight:"700"},children:n})]})}},428:function(e,n,t){"use strict";t.d(n,{w:function(){return a}});var r=t(5893);t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){o(e,n,t[n])}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var a=function(e){var n=e.fill,t=void 0===n?"currentColor":n,o=e.size,a=e.height,i=e.width,u=s(e,["fill","size","height","width"]);return(0,r.jsx)("div",{style:{cursor:"pointer",display:"flex",alignItems:"center"},children:(0,r.jsxs)("svg",c({width:o||i||24,height:o||a||24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u,{children:[(0,r.jsx)("path",{d:"M16.25 22.5C17.2165 22.5 18 21.7165 18 20.75C18 19.7835 17.2165 19 16.25 19C15.2835 19 14.5 19.7835 14.5 20.75C14.5 21.7165 15.2835 22.5 16.25 22.5Z",fill:t}),(0,r.jsx)("path",{d:"M8.25 22.5C9.2165 22.5 10 21.7165 10 20.75C10 19.7835 9.2165 19 8.25 19C7.2835 19 6.5 19.7835 6.5 20.75C6.5 21.7165 7.2835 22.5 8.25 22.5Z",fill:t}),(0,r.jsx)("path",{d:"M4.84 3.94L4.64 6.39C4.6 6.86 4.97 7.25 5.44 7.25H20.75C21.17 7.25 21.52 6.93 21.55 6.51C21.68 4.74 20.33 3.3 18.56 3.3H6.27C6.17 2.86 5.97 2.44 5.66 2.09C5.16 1.56 4.46 1.25 3.74 1.25H2C1.59 1.25 1.25 1.59 1.25 2C1.25 2.41 1.59 2.75 2 2.75H3.74C4.05 2.75 4.34 2.88 4.55 3.1C4.76 3.33 4.86 3.63 4.84 3.94Z",fill:t}),(0,r.jsx)("path",{d:"M20.5101 8.75H5.17005C4.75005 8.75 4.41005 9.07 4.37005 9.48L4.01005 13.83C3.87005 15.54 5.21005 17 6.92005 17H18.0401C19.5401 17 20.8601 15.77 20.9701 14.27L21.3001 9.6C21.3401 9.14 20.9801 8.75 20.5101 8.75Z",fill:t})]}))})}},8662:function(e,n,t){"use strict";t.d(n,{o:function(){return o}});var r=t(5678),o=function(){switch(location.href.split("#")[1]){case"logout":r.Am.warn("Se ha deslogeado");break;case"logged":r.Am.success("Inicio de sesion exitoso!");break;case"unauthorized":r.Am.error("No se encuentra autorizado")}}},8366:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return d}});var r=t(5893),o=t(9008),c=t.n(o),s=t(2553),a=t(9837),i=t(4040),u=t(6979),l=(t(7294),function(){var e=(new Date).getFullYear();return(0,r.jsxs)("div",{className:"footer-container",children:[(0,r.jsxs)(s.ZP.Container,{className:"footer-container",gap:2,children:[(0,r.jsx)(s.ZP,{xs:12,sm:12,md:3,lg:4,xl:4,children:(0,r.jsx)(a.ZP,{width:200,src:"/../../img/almargen.png"})}),(0,r.jsx)(s.ZP,{xs:12,sm:12,md:4,lg:4,xl:4,children:(0,r.jsxs)(i.Z,{className:"footer-text",children:[(0,r.jsx)(u.Z,{className:"footer-title",children:"\xbfC\xf3mo funciona?"}),(0,r.jsx)(u.Z,{children:"El lunes a las 20 hs cierra el carrito y enviamos el pedido a los distintos proveedores."}),(0,r.jsx)(u.Z,{children:"El pr\xf3ximo viernes pod\xe9s retirar tu pedido en el local de Ruiz Moreno 960 en los horarios informados en el mail y en el grupo de WhatsApp."})]})}),(0,r.jsx)(s.ZP,{xs:12,sm:12,md:4,lg:4,xl:4,children:(0,r.jsxs)(i.Z,{css:{display:"block"},children:[(0,r.jsx)(u.Z,{className:"footer-title",children:"Contactanos"}),(0,r.jsx)(u.Z,{children:"Por dudas o consultas de tus pedidos pod\xe9s escribirnos a comprascomunitariasalmargen@gmail.com o contactarte con cualquiera de los referentes del grupo."})]})})]}),(0,r.jsx)("div",{className:"footer-last-container",children:(0,r.jsxs)(u.Z,{className:"footer-text-copy",children:["\xa9 Copyright - ",e," Al Margen compras comunitarias"]})})]})}),d=function(e){var n=e.children;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c(),{children:[(0,r.jsx)("title",{children:"AlMargen | Del otro lado de tu mesa"}),(0,r.jsx)("meta",{content:"width=device-width, initial-scale=1.0",name:"viewport"})]}),(0,r.jsxs)("div",{className:"page-wrapper",children:[(0,r.jsx)("div",{className:"dev-container"}),(0,r.jsx)("div",{className:"develop",children:"Develop Stage"}),n,(0,r.jsx)(l,{})]})]})}},9646:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return G},default:function(){return L}});var r=t(4051),o=t.n(r),c=t(5893),s=t(3165),a=t(4040),i=t(8377),u=t(7501),l=t(2553),d=t(6353),f=t(7294),h=t(8773),p=t(9837),m=t(6979),g=t(7690),x=t(2814),v=t(9398),j=t(5634),y=t(189),b=function(e){var n,t=e.stock,r=e.getStockBadgeText;return(0,c.jsx)(y.ZP,{color:(n=t,0===n?"error":null===n||n>10?"success":"warning"),className:"info-badge",children:r?r(t):function(e){return 0===e?"Sin stock":null===e||e>10?"Stock disponible":"\xdaltima".concat(1===e?" unidad":"s ".concat(e," unidades"),"!")}(t)})},w=function(e){var n=e.item,t=e.addProduct,r=(0,f.useState)(!1),o=r[0],s=r[1],i=(0,f.useState)(1),d=i[0],y=i[1],w=(0,f.useState)(0!==n.stock),C=w[0],P=w[1];return(0,f.useEffect)((function(){null!==n.stock&&d>=n.stock?P(!1):P(!0)}),[d]),(0,c.jsx)(l.ZP,{xs:12,sm:12,md:12,lg:12,xl:12,children:(0,c.jsx)(h.ZP,{css:{margin:0,letterSpacing:0},children:(0,c.jsxs)(h.ZP.Body,{className:"product-container ".concat(0===n.stock&&"unavailable"),children:[(0,c.jsxs)(l.ZP.Container,{gap:1,justify:"space-around",children:[(0,c.jsx)(l.ZP,{xs:4,children:(0,c.jsx)(p.ZP,{objectFit:"contain",src:n.picture})}),(0,c.jsxs)(l.ZP,{xs:8,className:"details-container",lg:6,md:6,xl:6,children:[(0,c.jsx)(m.Z,{className:"product-name",children:n.name}),(0,c.jsx)(m.Z,{className:"product-reference",children:n.minimum}),(0,c.jsxs)(m.Z,{className:"product-supplier",children:[(0,c.jsx)(x.G,{icon:v.Flz}),n.seller]}),(0,c.jsxs)(m.Z,{className:"product-price",children:["$",n.price]})]})]}),(0,c.jsxs)(a.Z,{align:"center",children:[(0,c.jsx)(l.ZP,{sm:7,xs:7,lg:6,md:6,xl:6,direction:"column",justify:"center",alignItems:"center",children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(b,{stock:n.stock}),(0,c.jsx)(j.Z,{qty:d,moreAvailable:C,increaseQty:function(){C&&y((function(e){return e+1}))},decreaseQty:function(){d>1&&y((function(e){return e-1}))}})]})}),(0,c.jsx)(l.ZP,{sm:3,xs:3,lg:6,md:6,xl:6,children:(0,c.jsx)(g.ZP,{disabled:0===n.stock||o,onClick:function(){t(n,d,s),y(1)},className:"button-text",css:{backgroundColor:"#F29400",color:"black",fontWeight:400},auto:!0,flat:!0,children:o?(0,c.jsx)(u.ZP,{}):"Agregar"})})]})]})})})},C=t(8721);function P(e,n,t,r,o,c,s){try{var a=e[c](s),i=a.value}catch(u){return void t(u)}a.done?n(i):Promise.resolve(i).then(r,o)}function k(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var c=e.apply(n,t);function s(e){P(c,r,o,s,a,"next",e)}function a(e){P(c,r,o,s,a,"throw",e)}s(void 0)}))}}var Z=function(){var e=k(o().mark((function e(){var n,t,r,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:1,t=c.length>1&&void 0!==c[1]?c[1]:"",r=c.length>2&&void 0!==c[2]?c[2]:"",e.next=3,(0,C.U)({url:"/api/products",query:{category:t,search:r,page:n}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=k(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.U)({url:"/api/categories"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=(function(){var e=k(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.U)({url:"/api/cart/status"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=k(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.U)({url:"/api/admin/orders/to-post"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}(),t(3883)),O=t(7882),q=function(e){var n=e.categories,t=e.category,r=e.setCategory;return(0,c.jsx)("div",{className:"selector-container",children:n.length>1&&(0,c.jsxs)(O.ZP,{triggerType:"listbox",disableTriggerPressedAnimation:!0,children:[(0,c.jsx)(O.ZP.Button,{className:"selector",children:t.name}),(0,c.jsx)(O.ZP.Menu,{"aria-label":"Dynamic Actions",items:n,css:{width:1500},selectedKeys:t.key,onAction:function(e){r(n.find((function(n){return n.key===e})))},children:n.map((function(e){return(0,c.jsx)(O.ZP.Item,{color:"delete"===e.key?"error":"default",children:e.name},e.key)}))})]})})},A=t(8662),E=t(8366),T=t(1163),B=t(428),_=function(e){var n=e.cart,t=(0,T.useRouter)();return(0,c.jsx)("div",{className:"container-floating",children:(0,c.jsx)(g.ZP,{onClick:function(){return t.push("cart")},size:"xs",className:"button-floating",children:(0,c.jsxs)("div",{className:"button-content",children:[(0,c.jsxs)("div",{className:"cart-total",children:["$ ",n.total,"  No olvides confirmar tu compra entrando aqu\xed!"]}),(0,c.jsx)(y.ZP,{color:"warning",size:"sm",content:n.products.length,shape:"circle",onClick:function(){return t.push("/cart")},children:(0,c.jsx)(B.w,{fill:"white",size:24,width:24,height:24,onClick:function(){return t.push("/cart")}})})]})})})};var R=t(9684),z=t(5678),F=t(6455),U=t.n(F),M=t(6457),D=t(5604);function I(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function H(e,n,t,r,o,c,s){try{var a=e[c](s),i=a.value}catch(u){return void t(u)}a.done?n(i):Promise.resolve(i).then(r,o)}function Q(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function W(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return I(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return I(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var G=!0;function L(e){var n=(0,R.rq)(),t=(0,T.useRouter)(),r=function(){t.push("/cart")},h=(0,f.useState)([]),p=h[0],m=h[1],g=(0,f.useState)(""),x=g[0],v=g[1],j=(0,f.useState)([{key:"",name:"Todas las categor\xedas"}]),y=j[0],b=j[1],P=(0,f.useState)({key:"",name:"Todas las categor\xedas"}),k=P[0],O=P[1],F=(0,f.useState)(1),I=F[0],G=F[1],L=(0,f.useState)(1),$=L[0],K=L[1],X=(0,f.useState)(!0),J=X[0],V=X[1],Y=function(e,n){var t=(0,f.useState)(e),r=t[0],o=t[1];return(0,f.useEffect)((function(){var t=setTimeout((function(){o(e)}),n);return function(){clearTimeout(t)}}),[e,n]),r}(x,750),ee=function(){var e,t=(e=o().mark((function e(t,s){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(!0),(0,C.U)({url:"/api/products/".concat(t.code),onSuccess:function(e){var o=e.product,s=n.getUnsavedQtyForProduct(t.code);if(!(0,M.t)(o,t.qty+s))return ne($,k,Y),void(0,D.n2)(o.stock,s,r);n.addProduct(t),z.Am.warn("El producto se agreg\xf3 al carrito",{icon:(0,c.jsx)(B.w,{fill:"#EA903C",size:24,width:16,height:16})})},onError:function(e){var n;console.log("ERROR",e),U().fire({icon:"error",title:"Algo sali\xf3 mal",text:(n=e,"PRODUCT_STOCK_NOT_ENOUGH"===n.message?"No hay suficiente products.ts para este producto":"Algo sali\xf3 mal, por favor intente nuevamente")}),ne($,k,Y)},onFinally:function(){return s(!1)}});case 2:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var c=e.apply(n,t);function s(e){H(c,r,o,s,a,"next",e)}function a(e){H(c,r,o,s,a,"throw",e)}s(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();(0,f.useEffect)((function(){(0,A.o)(),Z().then((function(e){m(e.products),G(e.totalPages),V(!1)})),N().then((function(e){var n=[];e.map((function(e){return n.push({key:e.slug,name:e.name})})),b([{key:"",name:"Todas las categor\xedas"}].concat(W(n)))}))}),[]);var ne=function(e,n,t){Z(e,n.key,t).then((function(n){K(e),G(n.totalPages),m(n.products)}))};return(0,f.useEffect)((function(){K(1),ne(1,k,Y)}),[k,Y]),(0,c.jsxs)(E.default,{children:[(0,c.jsx)(S.Z,{title:"Eleg\xed el rubro y encontr\xe1 tus productos",user:e.user,cart:n}),(0,c.jsxs)(s.Z,{css:{backgroundColor:"#fff",maxWidth:"1260px"},children:[(0,c.jsxs)(a.Z,{css:{backgroundColor:"transparent",marginTop:"-1.4rem"},className:"search-row",children:[(0,c.jsx)(i.ZP,{placeholder:"Busc\xe1 un producto...",clearable:!0,fullWidth:!0,className:"input-search",onChange:function(e){return v(e.target.value)}}),(0,c.jsx)(q,{categories:y,setCategory:function(e){return O(e)},category:k})]}),J?(0,c.jsx)(u.ZP,{className:"loading-text-container",color:"warning",children:"Cargando..."}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.ZP.Container,{gap:1,css:{padding:0,backgroundColor:"#fff"},children:p&&p.map((function(e){return(0,c.jsx)(l.ZP,{xs:12,sm:12,md:6,lg:4,xl:4,children:(0,c.jsx)(w,{addProduct:function(e,n,t){return ee(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Q(e,n,t[n])}))}return e}({},e,{qty:n}),t)},item:e},e.code)},e.code)}))}),(0,c.jsx)(l.ZP.Container,{gap:2,css:{padding:0},children:(0,c.jsx)(l.ZP,{justify:"center",md:12,lg:12,xl:12,xs:12,sm:12,children:(0,c.jsx)(d.ZP,{className:"paginator",initialPage:1,total:I,onChange:function(e){ne(e,k,Y),window.scrollTo({top:200,left:0,behavior:"smooth"})},color:"warning",page:$})})})]})]}),n.products.length>0&&n.hasUnsavedChanges&&(0,c.jsx)(_,{cart:n})]})}},5604:function(e,n,t){"use strict";t.d(n,{Fc:function(){return a},n2:function(){return c},pk:function(){return s},ub:function(){return i}});var r=t(6455),o=t.n(r);function c(e,n,t){return o().fire({showCancelButton:n>0,confirmButtonText:"Ok",confirmButtonColor:"#db8704",cancelButtonText:"Ver mi pedido",icon:"warning",title:"No hay suficiente stock para agregar esa cantidad a tu carrito",html:"\n        ".concat(n>0&&n<=e?"<b>Record\xe1 que tenes ".concat(n," unidad").concat(n>1?"es":""," de este producto en tu carrito sin guardar</b>"):"","\n        ").concat(n>0&&n>e?"\n            Ten\xe9s ".concat(n," unidad").concat(n>1?"es":""," de este producto sin guardar en tu carrito, que por falta de stock ya no est\xe1n disponibles.\n            Record\xe1 guardar tu orden despu\xe9s de agregar los productos que necesites\n            "):""),footer:"".concat(n>e?"Esto puede deberse a que otro usuario guard\xf3 el producto en su carrito que vos. Sentimos las molestias":"")}).then((function(e){e.isDismissed&&t()}))}function s(e){return o().fire({confirmButtonText:"Ok",confirmButtonColor:"#db8704",icon:"warning",title:"Algunos de los productos que hab\xedas agregado a tu carrito ya no tienen stock. Revis\xe1 su cantidad",html:"\n        <ul>\n            ".concat(e.map((function(e){return"<li>".concat(e.name,": Quedan ").concat(e.stock," disponibles y ten\xe9s ").concat(e.unsavedQty," sin guardar</li>")})).join(""),"\n        ")})}function a(e,n){return o().fire({html:'\xbfEst\xe1s seguro que quer\xe9s eliminar todas las unidades de "'.concat(e.name,'" de tu carrito?'),icon:"warning",showCancelButton:!0,confirmButtonColor:"#db8704",cancelButtonColor:"#d33",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar",footer:"Record\xe1 que para hacer efectivos los cambios ten\xe9s que guardar tu pedido nuevamente"}).then((function(e){e.isConfirmed&&n()}))}function i(e){return o().fire({title:"\xbfEst\xe1s seguro que quer\xe9s cancelar tu pedido?",html:"Si lo hac\xe9s, vas a perder todos los productos que agregaste a tu carrito",icon:"warning",showCancelButton:!0,confirmButtonColor:"#db8704",cancelButtonColor:"#d33",confirmButtonText:"S\xed, cancelar",cancelButtonText:"No, volver"}).then((function(n){n.isConfirmed&&e()}))}}},function(e){e.O(0,[523,166,500,870,393,660,774,888,179],(function(){return n=7153,e(e.s=n);var n}));var n=e.O();_N_E=n}]);