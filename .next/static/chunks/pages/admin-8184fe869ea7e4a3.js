(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{577:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return r(491)}])},3883:function(e,n,r){"use strict";var t=r(5893),o=(r(7294),r(9837)),s=r(7690),i=r(189),a=r(6979),c=r(1163),l=r(428),u=r(2814),d=r(9398);n.Z=function(e){var n=e.title,r=e.user,h=e.cart,f=(0,c.useRouter)();return(0,t.jsxs)("div",{className:"header",children:[r.logged&&(0,t.jsxs)("div",{className:"buttons-container",children:[(0,t.jsx)("div",{style:{cursor:"pointer"},children:(0,t.jsx)(o.ZP,{width:100,onClick:function(){return f.push("/")},src:"/../../img/almargen-header.png",objectFit:"contain"})}),(0,t.jsxs)("div",{className:"sessions-buttons",children:[(0,t.jsxs)(s.ZP,{className:"logout-button",onClick:function(){return f.push("/api/logout")},children:["Salir",(0,t.jsx)(u.G,{className:"logout-icon",icon:d.SJh})]}),h&&(0,t.jsx)(i.ZP,{css:{cursor:"pointer"},color:"warning",content:h.products.length,shape:"circle",onClick:function(){return f.push("/cart")},children:(0,t.jsx)(l.w,{fill:"white",size:30,width:24,height:24,onClick:function(){return f.push("/cart")}})})]})]}),(0,t.jsx)(a.Z,{className:"header-text",css:{fontWeight:"700"},children:n})]})}},428:function(e,n,r){"use strict";r.d(n,{w:function(){return a}});var t=r(5893);r(7294);function o(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function s(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){o(e,n,r[n])}))}return e}function i(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},s=Object.keys(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var a=function(e){var n=e.fill,r=void 0===n?"currentColor":n,o=e.size,a=e.height,c=e.width,l=i(e,["fill","size","height","width"]);return(0,t.jsx)("div",{style:{cursor:"pointer",display:"flex",alignItems:"center"},children:(0,t.jsxs)("svg",s({width:o||c||24,height:o||a||24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{children:[(0,t.jsx)("path",{d:"M16.25 22.5C17.2165 22.5 18 21.7165 18 20.75C18 19.7835 17.2165 19 16.25 19C15.2835 19 14.5 19.7835 14.5 20.75C14.5 21.7165 15.2835 22.5 16.25 22.5Z",fill:r}),(0,t.jsx)("path",{d:"M8.25 22.5C9.2165 22.5 10 21.7165 10 20.75C10 19.7835 9.2165 19 8.25 19C7.2835 19 6.5 19.7835 6.5 20.75C6.5 21.7165 7.2835 22.5 8.25 22.5Z",fill:r}),(0,t.jsx)("path",{d:"M4.84 3.94L4.64 6.39C4.6 6.86 4.97 7.25 5.44 7.25H20.75C21.17 7.25 21.52 6.93 21.55 6.51C21.68 4.74 20.33 3.3 18.56 3.3H6.27C6.17 2.86 5.97 2.44 5.66 2.09C5.16 1.56 4.46 1.25 3.74 1.25H2C1.59 1.25 1.25 1.59 1.25 2C1.25 2.41 1.59 2.75 2 2.75H3.74C4.05 2.75 4.34 2.88 4.55 3.1C4.76 3.33 4.86 3.63 4.84 3.94Z",fill:r}),(0,t.jsx)("path",{d:"M20.5101 8.75H5.17005C4.75005 8.75 4.41005 9.07 4.37005 9.48L4.01005 13.83C3.87005 15.54 5.21005 17 6.92005 17H18.0401C19.5401 17 20.8601 15.77 20.9701 14.27L21.3001 9.6C21.3401 9.14 20.9801 8.75 20.5101 8.75Z",fill:r})]}))})}},2235:function(e,n,r){"use strict";function t(e){var n=new Date(e),r=n.getUTCDate().toString(),t=(n.getUTCMonth()+1).toString();return 1===r.length&&(r="0"+r),1===t.length&&(t="0"+t),"".concat(r,"/").concat(t)}function o(e){var n=new Date(e),r=n.getHours().toString();1===r.length&&(r="0"+r);var t=n.getMinutes().toString();return 1===t.length&&(t="0"+t),"".concat(r,":").concat(t)}r.d(n,{D:function(){return o},f:function(){return t}})},8662:function(e,n,r){"use strict";r.d(n,{o:function(){return o}});var t=r(5678),o=function(){switch(location.href.split("#")[1]){case"logout":t.Am.warn("Se ha deslogeado");break;case"logged":t.Am.success("Inicio de sesion exitoso!");break;case"unauthorized":t.Am.error("No se encuentra autorizado")}}},491:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSP:function(){return T},default:function(){return U}});var t=r(5893),o=r(7294),s=r(3165),i=r(2553),a=r(8366),c=r(3883),l=r(8377),u=r(6979),d=r(7690),h=r(7501),f=r(8721);function j(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function x(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){j(e,n,r[n])}))}return e}var p=function(e){return e.setSeconds(0,0),e.toISOString().replace(/:00.\d+Z$/g,"")},g=function(e){if(!e)return"";var n=new Date(e);return n.setDate(n.getDate()+1),p(n)};function m(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function v(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){m(e,n,r[n])}))}return e}var b={openDate:"",closeDate:""},Z={},P=function(e){var n,r,a=e.setEditing,c=e.setCurrentStatus,m=function(e){var n=(0,o.useState)(e),r=n[0],t=n[1];return x({},r,{setValue:function(e,n){t(x({},r,j({},e,n)))},validateFields:function(e){var n={};return Object.keys(r).forEach((function(t){r[t]||(n=x({},n,j({},t,"".concat(e[t]))))})),Object.keys(n).length>0&&n},fields:r})}(b),P=(0,o.useState)(Z),C=P[0],y=P[1],w=(0,o.useState)({error:null,loading:!1,done:!1}),O=w[0],D=w[1],S=p(new Date),N=function(e,n){var r=e.target.value;m.setValue(n,r)};return(0,t.jsxs)(s.Z,{children:[(0,t.jsxs)(i.ZP.Container,{gap:3,justify:"center",children:[(0,t.jsxs)(i.ZP,{children:[(0,t.jsx)(l.ZP,{type:"datetime-local",label:"Fecha y hora de apertura",min:S,value:m.openDate,onChange:function(e){return N(e,"openDate")}}),(0,t.jsx)(u.Z,{color:"error",children:null!==(n=C.openDate)&&void 0!==n?n:""})]}),(0,t.jsxs)(i.ZP,{children:[(0,t.jsx)(l.ZP,{type:"datetime-local",label:"Fecha y hora de cierre",disabled:""===m.openDate,min:g(m.openDate),value:m.closeDate,onChange:function(e){return N(e,"closeDate")}}),(0,t.jsx)(u.Z,{color:"error",children:null!==(r=C.closeDate)&&void 0!==r?r:""})]})]}),(0,t.jsx)(d.ZP,{onClick:function(){return a(!1)},className:O.loading?"button-total-disabled":"button-cancel",children:"Cancelar"}),(0,t.jsx)(d.ZP,{onClick:function(){return function(){var e=m.validateFields({openDate:"Debe ingresar una fecha de apertura",closeDate:"Debe ingresar una fecha de cierre"}),n=new Date(m.closeDate)<=new Date(m.openDate);return(e||n)&&y(null!==e&&void 0!==e?e:{openDate:"La fecha de cierre debe ser mayor que la de apertura"}),!e}()&&(D({error:null,done:!1,loading:!0}),(0,f.U)({url:"/api/admin/cart/dates",method:"POST",data:v({},m.fields,{openDate:m.fields.openDate.replace(".000Z",""),closeDate:m.fields.closeDate.replace(".000Z","")}),onSuccess:function(e){c(e),D({error:null,loading:!1,done:!0})},onError:function(e){return D({error:"Ocurri\xf3 un error enviando las fechas",loading:!1,done:!0})}}),void a(!1))},className:O.loading?"button-total-disabled":"button-total",children:"Confirmar"}),(0,t.jsxs)(i.ZP.Container,{gap:2,direction:"column",justify:"center",children:[O.loading&&(0,t.jsx)(h.ZP,{color:"warning"}),O.done&&O.error&&(0,t.jsx)(u.Z,{children:O.error})]})]})},C=r(4051),y=r.n(C),w=r(3896),O=r(4040),D=function(e){var n=e.visible,r=e.close,o=e.onConfirm;return(0,t.jsxs)(w.ZP,{closeButton:!0,"aria-labelledby":"modal-title",open:n,onClose:r,children:[(0,t.jsx)(w.ZP.Header,{children:(0,t.jsx)(u.Z,{id:"modal-title",size:18,children:"\xbfDesea enviar todos los pedidos al Excel?"})}),(0,t.jsx)(O.Z,{css:{padding:10},children:(0,t.jsx)(u.Z,{size:16,children:"Los pedidos enviados ya no ser\xe1n accesibles para los usuarios."})}),(0,t.jsxs)(w.ZP.Footer,{children:[(0,t.jsx)(d.ZP,{auto:!0,flat:!0,color:"error",onClick:r,children:"Cancelar"}),(0,t.jsx)(d.ZP,{auto:!0,onClick:function(){r(),o()},children:"Enviar Pedidos"})]})]})};function S(e,n,r,t,o,s,i){try{var a=e[s](i),c=a.value}catch(l){return void r(l)}a.done?n(c):Promise.resolve(c).then(t,o)}var N=function(e){var n=e.ordersCount,r=e.setOrdersCount,a=e.status,c=(0,o.useState)({error:null,loading:!1,done:!1}),l=c[0],j=c[1],x=(0,o.useState)(!1),p=x[0],g=x[1],m=function(){var e,n=(e=y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,f.U)({url:"/api/admin/orders",method:"POST",onSuccess:function(){r(0),j({error:null,loading:!1,done:!0})},onError:function(){j({error:"Ocurri\xf3 un error enviando los pedidos",loading:!1,done:!0})}});case 1:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,o){var s=e.apply(n,r);function i(e){S(s,t,o,i,a,"next",e)}function a(e){S(s,t,o,i,a,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,t.jsxs)(s.Z,{children:[(0,t.jsxs)(i.ZP.Container,{justify:"center",direction:"column",alignItems:"center",children:[(0,t.jsx)(u.Z,{h3:!0,children:"Pedidos guardados hasta ahora (sin enviar)"}),(0,t.jsx)(u.Z,{h2:!0,children:n}),(0,t.jsx)(d.ZP,{disabled:"open"===a,onClick:function(){return g(!0)},className:l.loading||"open"===a?"button-total-disabled":"button-total",children:"Enviar pedidos"}),(0,t.jsx)(D,{visible:p,close:function(){return g(!1)},onConfirm:m})]}),(0,t.jsxs)(i.ZP.Container,{gap:2,direction:"column",justify:"center",children:[l.loading&&(0,t.jsx)(h.ZP,{color:"warning"}),l.done&&(l.error?(0,t.jsx)(u.Z,{color:"error",children:l.error}):(0,t.jsx)(u.Z,{children:"Pedidos enviados con \xe9xito"}))]})]})},k=r(2235),E=function(e){var n=e.status,r=e.setEditing;return(0,t.jsx)(s.Z,{children:(0,t.jsxs)(i.ZP.Container,{justify:"center",direction:"column",alignItems:"center",children:[(0,t.jsx)(u.Z,{h3:!0,children:"Estado actual del carrito"}),(0,t.jsx)(u.Z,{h4:!0,children:{open:"Abierto",toOpen:"Abre pronto",closed:"Cerrado"}[n.status]}),(0,t.jsx)(i.ZP,{children:(0,t.jsxs)(u.Z,{children:["Abre: ",(0,t.jsx)("strong",{children:(0,k.f)(n.openDate)})," a las"," ",(0,t.jsx)("strong",{children:(0,k.D)(n.openDate)})]})}),(0,t.jsx)(i.ZP,{children:(0,t.jsxs)(u.Z,{children:["Cierra: ",(0,t.jsx)("strong",{children:(0,k.f)(n.closeDate)})," a las"," ",(0,t.jsx)("strong",{children:(0,k.D)(n.closeDate)})]})}),(0,t.jsx)(d.ZP,{onClick:function(){return r(!0)},className:"button-total",children:"Editar fechas"})]})})},_=r(8662),A=r(4375),z=function(e){var n=e.orders,r=n.reduce((function(e,n){return e+=n.total}),0);return(0,t.jsx)("div",{children:(0,t.jsxs)(A.ZP,{className:"orders-table",children:[(0,t.jsxs)(A.ZP.Header,{children:[(0,t.jsx)(A.ZP.Column,{children:"Usuario"}),(0,t.jsxs)(A.ZP.Column,{children:["Total de ordenes  $ ",r]})]}),(0,t.jsx)(A.ZP.Body,{children:n.map((function(e){return(0,t.jsxs)(A.ZP.Row,{children:[(0,t.jsx)(A.ZP.Cell,{children:e.email}),(0,t.jsxs)(A.ZP.Cell,{children:["$ ",e.total]})]},e.email)}))})]})})},H=r(9398),M=r(2814),F=r(5678),I=function(){var e=(0,o.useState)(!1),n=e[0],r=e[1];return(0,t.jsx)(d.ZP,{className:n?"button-total-disabled":"button-total",onClick:function(){r(!0),(0,f.U)({url:"/api/admin/update-products",onSuccess:function(e){r(!1),F.Am.warn("Productos actualizados exitosamente",{icon:(0,t.jsx)(M.G,{icon:H.f8k,color:"#EA903C"})})},onError:function(e){r(!1),F.Am.error("Ocurri\xf3 un error actualizando los productos",{icon:(0,t.jsx)(M.G,{icon:H.f8k,color:"#EA903C"})})}})},children:n?(0,t.jsx)(h.ZP,{}):"Actualizar productos"})},T=!0;function U(e){var n=e.orders,r=e.count,l=e.status,u=e.user,d=(0,o.useState)(!1),h=d[0],f=d[1],j=(0,o.useState)(r),x=j[0],p=j[1],g=(0,o.useState)(l),m=g[0],v=g[1];return(0,o.useEffect)((function(){return(0,_.o)()}),[]),(0,t.jsxs)(a.default,{children:[(0,t.jsx)(c.Z,{user:u,title:"Panel de administrador"}),(0,t.jsxs)(s.Z,{children:[(0,t.jsxs)(i.ZP.Container,{justify:"center",alignItems:"center",gap:3,direction:"column",children:[(0,t.jsx)(i.ZP,{children:(0,t.jsx)(I,{})}),(0,t.jsx)(i.ZP,{xs:12,sm:10,md:8,lg:6,children:(0,t.jsx)(N,{ordersCount:x,setOrdersCount:p,status:l.status})}),(0,t.jsx)(i.ZP,{xs:12,sm:10,md:8,lg:6,children:h?(0,t.jsx)(P,{setEditing:f,setCurrentStatus:v,initialStatus:m}):(0,t.jsx)(E,{status:m,setEditing:f})})]}),x?(0,t.jsx)(z,{orders:n}):""]})]})}},8366:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return d}});var t=r(5893),o=r(9008),s=r.n(o),i=r(2553),a=r(9837),c=r(4040),l=r(6979),u=(r(7294),function(){var e=(new Date).getFullYear();return(0,t.jsxs)("div",{className:"footer-container",children:[(0,t.jsxs)(i.ZP.Container,{className:"footer-container",gap:2,children:[(0,t.jsx)(i.ZP,{xs:12,sm:12,md:3,lg:4,xl:4,children:(0,t.jsx)(a.ZP,{width:200,src:"/../../img/almargen.png"})}),(0,t.jsx)(i.ZP,{xs:12,sm:12,md:4,lg:4,xl:4,children:(0,t.jsxs)(c.Z,{className:"footer-text",children:[(0,t.jsx)(l.Z,{className:"footer-title",children:"\xbfC\xf3mo funciona?"}),(0,t.jsx)(l.Z,{children:"El lunes a las 20 hs cierra el carrito y enviamos el pedido a los distintos proveedores."}),(0,t.jsx)(l.Z,{children:"El pr\xf3ximo viernes pod\xe9s retirar tu pedido en el local de Ruiz Moreno 960 en los horarios informados en el mail y en el grupo de WhatsApp."})]})}),(0,t.jsx)(i.ZP,{xs:12,sm:12,md:4,lg:4,xl:4,children:(0,t.jsxs)(c.Z,{css:{display:"block"},children:[(0,t.jsx)(l.Z,{className:"footer-title",children:"Contactanos"}),(0,t.jsx)(l.Z,{children:"Por dudas o consultas de tus pedidos pod\xe9s escribirnos a comprascomunitariasalmargen@gmail.com o contactarte con cualquiera de los referentes del grupo."})]})})]}),(0,t.jsx)("div",{className:"footer-last-container",children:(0,t.jsxs)(l.Z,{className:"footer-text-copy",children:["\xa9 Copyright - ",e," Al Margen compras comunitarias"]})})]})}),d=function(e){var n=e.children;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s(),{children:[(0,t.jsx)("title",{children:"AlMargen | Del otro lado de tu mesa"}),(0,t.jsx)("meta",{content:"width=device-width, initial-scale=1.0",name:"viewport"})]}),(0,t.jsxs)("div",{className:"page-wrapper",children:[(0,t.jsx)("div",{className:"dev-container"}),(0,t.jsx)("div",{className:"develop",children:"Develop Stage"}),n,(0,t.jsx)(u,{})]})]})}}},function(e){e.O(0,[523,500,870,393,121,774,888,179],(function(){return n=577,e(e.s=n);var n}));var n=e.O();_N_E=n}]);